

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Make your own forcing data from ERA5 &mdash; pyclmuapp v0.0.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=9edc463e" />
      <link rel="stylesheet" type="text/css" href="../../_static/nbsphinx-code-cells.css?v=2aa19091" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=1812e922"></script>
      <script src="../../_static/doctools.js?v=fd6eb6e6"></script>
      <script src="../../_static/sphinx_highlight.js?v=6ffebe34"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Make your own surface data" href="prepare_urbansurf_10evlurb.html" />
    <link rel="prev" title="Basic usage: Command line" href="../basic/basic_usage_cli.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            pyclmuapp
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/overview.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/installation.html#test">test</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python: warmup</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usp/warmup.html">Warmup</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python: examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usp/example1_usp_basic.html">Example 1: Basic usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usp/example2_usp_global_warming.html">Example 2: How does global warming will affect urban climates?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usp/example3_usp_adaptation.html">Example 3: Urban climate adaption</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../basic/basic_usage_inter.html">Basic usage: Web interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basic/basic_usage_cli.html">Basic usage: Command line</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python: created input files</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Make your own forcing data from ERA5</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#1-Download-the-required-variables-from-the-GEE">1 Download the required variables from the GEE</a></li>
<li class="toctree-l2"><a class="reference internal" href="#2-Download-the-required-variables-from-the-cdsapi">2 Download the required variables from the cdsapi</a></li>
<li class="toctree-l2"><a class="reference internal" href="#command-line">command line</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="prepare_urbansurf_10evlurb.html">Make your own surface data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Spinup</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usp/usp_spinup_mode.html">Spinup in USP mode</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">HPC</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../hpc/HPC.html">pyclmuapp on HPC: Command line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hpc/singularity.html">pyclmuapp on HPC: Python</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Evaluation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../val/urban_plumber_usp.html">Urban-Plumber2: UK-Kin site CLMU5 simulation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../pyclmuapp.html">pyclmuapp package</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">pyclmuapp</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Make your own forcing data from ERA5</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/notebooks/own/prepare_forcing_from_era5.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="Make-your-own-forcing-data-from-ERA5">
<h1>Make your own forcing data from ERA5<a class="headerlink" href="#Make-your-own-forcing-data-from-ERA5" title="Link to this heading"></a></h1>
<p>Introduction: There are lots of forcing data can be used to drive the model, such as ERA5, NCEP (<a class="reference external" href="https://psl.noaa.gov/data/gridded/data.ncep.reanalysis.html">https://psl.noaa.gov/data/gridded/data.ncep.reanalysis.html</a>), etc. Here, we recommend ERA5 to make your own single point forcing as the NCEP and others are too big to download. The ERA5 data can be obtained in a small scale, which usually light weight to download and store.</p>
<p><strong>New updates</strong>: The ERA5 source updated time-series data which is faster and more efficient and get forcing from the ERA5 (grided) source.</p>
<p>We update the workflow to use the new ERA5 source, you can use the <code class="docutils literal notranslate"><span class="pre">source='gee'</span></code> and <code class="docutils literal notranslate"><span class="pre">source='era5-land-ts'</span></code> for getting the forcing data efficiently.</p>
<p><strong>Notes</strong>: There are some differences in the calculation of source era5-land-ts and cds. This means you can use this dataset for experimenting with CLMU, but for prediction purposes, you will need to validate the output. Ideally, you should use your own forcing inputs for the best results.</p>
<section id="1-Download-the-required-variables-from-the-GEE">
<h2>1 Download the required variables from the GEE<a class="headerlink" href="#1-Download-the-required-variables-from-the-GEE" title="Link to this heading"></a></h2>
<p>Before running using <code class="docutils literal notranslate"><span class="pre">source='gee'</span></code>, make sure to install the Earth Engine API: <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">earthengine-api</span></code></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">pyclmuapp</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyclmuapp</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_forcing</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;pyclmuapp version: </span><span class="si">{</span><span class="n">pyclmuapp</span><span class="o">.</span><span class="n">__version__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">lat</span><span class="o">=</span><span class="mf">51.5</span>
<span class="n">lon</span><span class="o">=</span><span class="mf">0.12</span>
<span class="n">zbot</span><span class="o">=</span><span class="mi">30</span>
<span class="n">start_year</span><span class="o">=</span><span class="mi">2018</span>
<span class="n">end_year</span><span class="o">=</span><span class="mi">2018</span>
<span class="n">start_month</span><span class="o">=</span><span class="mi">7</span>
<span class="n">end_month</span><span class="o">=</span><span class="mi">9</span>
<span class="n">get_forcing</span><span class="p">(</span>
    <span class="n">lat</span><span class="o">=</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="o">=</span><span class="n">lon</span><span class="p">,</span> <span class="n">zbot</span><span class="o">=</span><span class="n">zbot</span><span class="p">,</span>
    <span class="n">start_year</span><span class="o">=</span><span class="n">start_year</span><span class="p">,</span> <span class="n">end_year</span><span class="o">=</span><span class="n">end_year</span><span class="p">,</span>
    <span class="n">start_month</span><span class="o">=</span><span class="n">start_month</span><span class="p">,</span> <span class="n">end_month</span><span class="o">=</span><span class="n">end_month</span><span class="p">,</span>
    <span class="n">source</span><span class="o">=</span><span class="s1">&#39;gee&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
pyclmuapp version: 0.0.2
Get ERA5 data from 2018-07-01 to 2018-10-01 for (51.5, 0.12)
  - 2018-07-01 ~ 2018-08-01
  - 2018-08-01 ~ 2018-09-01
  - 2018-09-01 ~ 2018-10-01
CPU times: user 730 ms, sys: 181 ms, total: 911 ms
Wall time: 9.13 s
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;/home/junjie/github/pyclmuapp/docs/notebooks/own/era5_data/era5_gee_forcing_51.5_0.12_30_2018_7_2018_9.nc&#39;
</pre></div></div>
</div>
</section>
<section id="2-Download-the-required-variables-from-the-cdsapi">
<h2>2 Download the required variables from the cdsapi<a class="headerlink" href="#2-Download-the-required-variables-from-the-cdsapi" title="Link to this heading"></a></h2>
<p>First, we will use the <code class="docutils literal notranslate"><span class="pre">cdsapi</span></code> package to download the data. If you don’t have the package installed, you can install it using the following command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pip install cdsapi

cat &lt;&lt;EOF &gt; ~/.cdsapirc
url: {api-url}
key: {uid}:{api-key}
EOF
</pre></div>
</div>
<p><a class="reference external" href="https://cds.climate.copernicus.eu/how-to-api">How to get your CDS API?</a></p>
<p><strong>note: it will take a long time to run this script, so you can run it in the background and check the output file later.</strong></p>
<p>We also can use the interface to download the data. The code below is an example of how to download the data using the interface.</p>
<p>ref: <a class="reference external" href="https://cds.climate.copernicus.eu/cdsapp#!/dataset/reanalysis-era5-single-levels">https://cds.climate.copernicus.eu/cdsapp#!/dataset/reanalysis-era5-single-levels</a>?tab=form</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pyclmuapp</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyclmuapp</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_forcing</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;pyclmuapp version: </span><span class="si">{</span><span class="n">pyclmuapp</span><span class="o">.</span><span class="n">__version__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
pyclmuapp version: 0.0.2
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>

<span class="n">lat</span><span class="o">=</span><span class="mf">51.5</span>
<span class="n">lon</span><span class="o">=</span><span class="mf">0.12</span>
<span class="n">zbot</span><span class="o">=</span><span class="mi">30</span>
<span class="n">start_year</span><span class="o">=</span><span class="mi">2018</span>
<span class="n">end_year</span><span class="o">=</span><span class="mi">2018</span>
<span class="n">start_month</span><span class="o">=</span><span class="mi">7</span>
<span class="n">end_month</span><span class="o">=</span><span class="mi">9</span>
<span class="n">get_forcing</span><span class="p">(</span>
    <span class="n">lat</span><span class="o">=</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="o">=</span><span class="n">lon</span><span class="p">,</span> <span class="n">zbot</span><span class="o">=</span><span class="n">zbot</span><span class="p">,</span>
    <span class="n">start_year</span><span class="o">=</span><span class="n">start_year</span><span class="p">,</span> <span class="n">end_year</span><span class="o">=</span><span class="n">end_year</span><span class="p">,</span>
    <span class="n">start_month</span><span class="o">=</span><span class="n">start_month</span><span class="p">,</span> <span class="n">end_month</span><span class="o">=</span><span class="n">end_month</span><span class="p">,</span>
    <span class="n">source</span><span class="o">=</span><span class="s1">&#39;era5-land-ts&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Downloading data for 51.5, 0.1, 2018-07-01 to 2018-10-01...
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
2026-01-10 23:17:06,727 WARNING [2025-06-04T00:00:00] This dataset provides user-selected location timeseries of [ERA5 Land data](https://doi.org/10.24381/cds.e2161bac) for a limited set of variables. Its content may be undergo changes over time (e.g. file format, data file structure, deprecation etc) and is **not recommended for use in a production environment**.

For users interested in large regions, the original ERA5 Land catalogue entry remains the more efficient option.
We will make every effort to notify users of changes, either through this banner and/or the [Forum](https://forum.ecmwf.int/).
2026-01-10 23:17:06,727 INFO Request ID is cc48820b-f777-4f81-a0af-bca1178bb679
2026-01-10 23:17:07,735 INFO status has been updated to accepted
2026-01-10 23:17:22,599 INFO status has been updated to successful
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "da7daea52a3d4befa0c56758820c279a", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
CPU times: user 122 ms, sys: 13.7 ms, total: 135 ms
Wall time: 19.3 s
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/home/junjie/github/pyclmuapp/pyclmuapp/era_forcing.py:68: FutureWarning: In a future version of xarray the default value for compat will change from compat=&#39;no_conflicts&#39; to compat=&#39;override&#39;. This is likely to lead to different results when combining overlapping variables with the same name. To opt in to new defaults and get rid of these warnings now use `set_options(use_new_combine_kwarg_defaults=True) or set compat explicitly.
  ds = xr.merge(xr_ls)
/home/junjie/github/pyclmuapp/pyclmuapp/era_forcing.py:68: FutureWarning: In a future version of xarray the default value for compat will change from compat=&#39;no_conflicts&#39; to compat=&#39;override&#39;. This is likely to lead to different results when combining overlapping variables with the same name. To opt in to new defaults and get rid of these warnings now use `set_options(use_new_combine_kwarg_defaults=True) or set compat explicitly.
  ds = xr.merge(xr_ls)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;/home/junjie/github/pyclmuapp/docs/notebooks/own/era5_data/era5_land_ts_forcing_51.5_0.12_30_2018_7_2018_9.nc&#39;
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>

<span class="n">lat</span><span class="o">=</span><span class="mf">51.5</span>
<span class="n">lon</span><span class="o">=</span><span class="mf">0.12</span>
<span class="n">zbot</span><span class="o">=</span><span class="mi">30</span>
<span class="n">start_year</span><span class="o">=</span><span class="mi">2018</span>
<span class="n">end_year</span><span class="o">=</span><span class="mi">2018</span>
<span class="n">start_month</span><span class="o">=</span><span class="mi">7</span>
<span class="n">end_month</span><span class="o">=</span><span class="mi">9</span>
<span class="n">get_forcing</span><span class="p">(</span>
    <span class="n">lat</span><span class="o">=</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="o">=</span><span class="n">lon</span><span class="p">,</span> <span class="n">zbot</span><span class="o">=</span><span class="n">zbot</span><span class="p">,</span>
    <span class="n">start_year</span><span class="o">=</span><span class="n">start_year</span><span class="p">,</span> <span class="n">end_year</span><span class="o">=</span><span class="n">end_year</span><span class="p">,</span>
    <span class="n">start_month</span><span class="o">=</span><span class="n">start_month</span><span class="p">,</span> <span class="n">end_month</span><span class="o">=</span><span class="n">end_month</span><span class="p">,</span>
    <span class="n">source</span><span class="o">=</span><span class="s1">&#39;cds&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
download: ./era5_data/era5_single/era5_single_2018_07_51.5_0.12.zip
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
2026-01-10 23:17:26,038 INFO [2025-12-11T00:00:00] Please note that a dedicated catalogue entry for this dataset, post-processed and stored in Analysis Ready Cloud Optimized (ARCO) format (Zarr), is available for optimised time-series retrievals (i.e. for retrieving data from selected variables for a single point over an extended period of time in an efficient way). You can discover it [here](https://cds.climate.copernicus.eu/datasets/reanalysis-era5-single-levels-timeseries?tab=overview)
2026-01-10 23:17:26,039 INFO Request ID is 02fa3302-0fe9-4714-9c46-e1ca94b40160
2026-01-10 23:17:27,086 INFO status has been updated to accepted
2026-01-10 23:19:27,994 INFO status has been updated to successful
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "707fe872301b44cfa545f3dce961251d", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/home/junjie/github/pyclmuapp/pyclmuapp/era5_forcing.py:88: FutureWarning: In a future version of xarray the default value for compat will change from compat=&#39;no_conflicts&#39; to compat=&#39;override&#39;. This is likely to lead to different results when combining overlapping variables with the same name. To opt in to new defaults and get rid of these warnings now use `set_options(use_new_combine_kwarg_defaults=True) or set compat explicitly.
  single_ds = xr.merge(ds_ls)
/home/junjie/github/pyclmuapp/pyclmuapp/era5_forcing.py:88: FutureWarning: In a future version of xarray the default value for compat will change from compat=&#39;no_conflicts&#39; to compat=&#39;override&#39;. This is likely to lead to different results when combining overlapping variables with the same name. To opt in to new defaults and get rid of these warnings now use `set_options(use_new_combine_kwarg_defaults=True) or set compat explicitly.
  single_ds = xr.merge(ds_ls)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
download: ./era5_data/era5_single/era5_single_2018_08_51.5_0.12.zip
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
2026-01-10 23:19:29,600 INFO [2025-12-11T00:00:00] Please note that a dedicated catalogue entry for this dataset, post-processed and stored in Analysis Ready Cloud Optimized (ARCO) format (Zarr), is available for optimised time-series retrievals (i.e. for retrieving data from selected variables for a single point over an extended period of time in an efficient way). You can discover it [here](https://cds.climate.copernicus.eu/datasets/reanalysis-era5-single-levels-timeseries?tab=overview)
2026-01-10 23:19:29,601 INFO Request ID is 0d8ffb15-92dd-41b0-ad90-d7f80af30db8
2026-01-10 23:19:29,647 INFO status has been updated to accepted
2026-01-10 23:19:40,724 INFO status has been updated to running
2026-01-10 23:25:56,899 INFO status has been updated to successful
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "1f2c7834d1b84b43bc2313a788f20bad", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/home/junjie/github/pyclmuapp/pyclmuapp/era5_forcing.py:88: FutureWarning: In a future version of xarray the default value for compat will change from compat=&#39;no_conflicts&#39; to compat=&#39;override&#39;. This is likely to lead to different results when combining overlapping variables with the same name. To opt in to new defaults and get rid of these warnings now use `set_options(use_new_combine_kwarg_defaults=True) or set compat explicitly.
  single_ds = xr.merge(ds_ls)
/home/junjie/github/pyclmuapp/pyclmuapp/era5_forcing.py:88: FutureWarning: In a future version of xarray the default value for compat will change from compat=&#39;no_conflicts&#39; to compat=&#39;override&#39;. This is likely to lead to different results when combining overlapping variables with the same name. To opt in to new defaults and get rid of these warnings now use `set_options(use_new_combine_kwarg_defaults=True) or set compat explicitly.
  single_ds = xr.merge(ds_ls)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
download: ./era5_data/era5_single/era5_single_2018_09_51.5_0.12.zip
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
2026-01-10 23:25:59,335 INFO [2025-12-11T00:00:00] Please note that a dedicated catalogue entry for this dataset, post-processed and stored in Analysis Ready Cloud Optimized (ARCO) format (Zarr), is available for optimised time-series retrievals (i.e. for retrieving data from selected variables for a single point over an extended period of time in an efficient way). You can discover it [here](https://cds.climate.copernicus.eu/datasets/reanalysis-era5-single-levels-timeseries?tab=overview)
2026-01-10 23:25:59,335 INFO Request ID is 935048d3-0a4e-4428-a733-f2acf2e46e01
2026-01-10 23:25:59,391 INFO status has been updated to accepted
2026-01-10 23:26:09,228 INFO status has been updated to running
2026-01-10 23:32:20,975 INFO status has been updated to successful
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "d237934131d64efba6798b2d8eab6af5", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
CPU times: user 375 ms, sys: 30.2 ms, total: 405 ms
Wall time: 14min 57s
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/home/junjie/github/pyclmuapp/pyclmuapp/era5_forcing.py:88: FutureWarning: In a future version of xarray the default value for compat will change from compat=&#39;no_conflicts&#39; to compat=&#39;override&#39;. This is likely to lead to different results when combining overlapping variables with the same name. To opt in to new defaults and get rid of these warnings now use `set_options(use_new_combine_kwarg_defaults=True) or set compat explicitly.
  single_ds = xr.merge(ds_ls)
/home/junjie/github/pyclmuapp/pyclmuapp/era5_forcing.py:88: FutureWarning: In a future version of xarray the default value for compat will change from compat=&#39;no_conflicts&#39; to compat=&#39;override&#39;. This is likely to lead to different results when combining overlapping variables with the same name. To opt in to new defaults and get rid of these warnings now use `set_options(use_new_combine_kwarg_defaults=True) or set compat explicitly.
  single_ds = xr.merge(ds_ls)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;/home/junjie/github/pyclmuapp/docs/notebooks/own/era5_data/era5_forcing_51.5_0.12_30_2018_7_2018_9.nc&#39;
</pre></div></div>
</div>
</section>
<section id="command-line">
<h2>command line<a class="headerlink" href="#command-line" title="Link to this heading"></a></h2>
<p>this is same as above</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span><span class="w"> </span>pyclmuapp<span class="w"> </span>--pyclmuapp_mode<span class="w"> </span>get_forcing<span class="w"> </span><span class="err">\</span>
    <span class="o">--</span><span class="n">lat</span> <span class="mf">51.5</span> <span class="o">--</span><span class="n">lon</span> <span class="mf">0.12</span> <span class="o">--</span><span class="n">zbot</span> <span class="mi">30</span> \
    <span class="o">--</span><span class="n">start_year</span> <span class="mi">2018</span> <span class="o">--</span><span class="n">end_year</span> <span class="mi">2018</span> \
    <span class="o">--</span><span class="n">start_month</span> <span class="mi">7</span> <span class="o">--</span><span class="n">end_month</span> <span class="mi">9</span> <span class="o">--</span><span class="n">source</span> <span class="s2">&quot;era5-land-ts&quot;</span>
<span class="c1"># will download and save in the default folder `./era5_forcing/`</span>
<span class="c1"># the output file will like `./era5_land_ts_forcing/era5_forcing_51.5_0.12_30_2018_7_2018_9.nc`</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Namespace(init=False, pwd=&#39;/home/junjie/github/pyclmuapp/docs/notebooks/own&#39;, container_type=&#39;docker&#39;, input_path=None, output_path=None, log_path=None, scripts_path=None, pyclmuapp_mode=&#39;get_forcing&#39;, has_container=True, usr_domain=None, usr_forcing=None, usr_surfdata=None, output_prefix=&#39;_clm.nc&#39;, case_name=&#39;usp_case&#39;, run_startdate=None, start_tod=&#39;00000&#39;, stop_option=&#39;ndays&#39;, stop_n=&#39;1&#39;, run_type=&#39;coldstart&#39;, run_refcase=&#39;None&#39;, run_refdate=&#39;None&#39;, run_reftod=&#39;00000&#39;, urban_hac=&#39;ON&#39;, iflog=True, logfile=&#39;pyclmuapp.log&#39;, hist_type=&#39;GRID&#39;, hist_nhtfrq=1, hist_mfilt=1000000000, clean=False, surf_var=None, surf_action=0, forcing_var=None, forcing_action=0, script=None, urbsurf=None, soildata=None, pct_urban=[0, 0, 100.0], lat=51.5, lon=0.12, outputname=&#39;surfdata.nc&#39;, zbot=30, start_year=2018, end_year=2018, start_month=7, end_month=9, source=&#39;era5-land-ts&#39;)
The forcing file era5_data/era5_land_ts_forcing_51.5_0.12_30_2018_7_2018_9.nc already exists.
</pre></div></div>
</div>
<p><strong>test the forcing data</strong></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span><span class="w"> </span>pyclmuapp<span class="w"> </span><span class="err">\</span>
    <span class="o">--</span><span class="n">container_type</span> <span class="n">docker</span> \
    <span class="o">--</span><span class="n">iflog</span> <span class="kc">True</span> \
    <span class="o">--</span><span class="n">logfile</span> <span class="s2">&quot;pyclmuapp.log&quot;</span> \
    <span class="o">--</span><span class="n">usr_forcing</span> <span class="s2">&quot;era5_data/era5_gee_forcing_51.5_0.12_30_2018_7_2018_9.nc&quot;</span> \
    <span class="o">--</span><span class="n">usr_surfdata</span> <span class="s2">&quot;surfdata.nc&quot;</span> \
    <span class="o">--</span><span class="n">RUN_STARTDATE</span> <span class="s2">&quot;2018-07-01&quot;</span> <span class="o">--</span><span class="n">STOP_OPTION</span> <span class="s2">&quot;ndays&quot;</span> <span class="o">--</span><span class="n">STOP_N</span> <span class="s2">&quot;15&quot;</span> \
    <span class="o">--</span><span class="n">RUN_TYPE</span> <span class="s2">&quot;coldstart&quot;</span> \
    <span class="o">--</span><span class="n">hist_mfilt</span> <span class="s2">&quot;1000000000&quot;</span> \
    <span class="o">--</span><span class="n">output_prefix</span> <span class="s2">&quot;_clm.nc&quot;</span> \
    <span class="o">--</span><span class="n">CASE_NAME</span> <span class="s2">&quot;pyclmuapp&quot;</span> \
    <span class="o">--</span><span class="n">clean</span> <span class="kc">True</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Namespace(init=False, pwd=&#39;/home/junjie/github/pyclmuapp/docs/notebooks/own&#39;, container_type=&#39;docker&#39;, input_path=None, output_path=None, log_path=None, scripts_path=None, pyclmuapp_mode=&#39;usp&#39;, has_container=True, usr_domain=None, usr_forcing=&#39;era5_data/era5_gee_forcing_51.5_0.12_30_2018_7_2018_9.nc&#39;, usr_surfdata=&#39;surfdata.nc&#39;, output_prefix=&#39;_clm.nc&#39;, case_name=&#39;pyclmuapp&#39;, run_startdate=&#39;2018-07-01&#39;, start_tod=&#39;00000&#39;, stop_option=&#39;ndays&#39;, stop_n=&#39;15&#39;, run_type=&#39;coldstart&#39;, run_refcase=&#39;None&#39;, run_refdate=&#39;None&#39;, run_reftod=&#39;00000&#39;, urban_hac=&#39;ON&#39;, iflog=True, logfile=&#39;pyclmuapp.log&#39;, hist_type=&#39;GRID&#39;, hist_nhtfrq=1, hist_mfilt=1000000000, clean=&#39;True&#39;, surf_var=None, surf_action=0, forcing_var=None, forcing_action=0, script=None, urbsurf=None, soildata=None, pct_urban=[0, 0, 100.0], lat=None, lon=None, outputname=&#39;surfdata.nc&#39;, zbot=30, start_year=2012, end_year=2012, start_month=1, end_month=12, source=&#39;cds&#39;)
Copying the file era5_gee_forcing_51.5_0.12_30_2018_7_2018_9.nc to the /home/junjie/github/pyclmuapp/docs/notebooks/own/workdir/inputfolder/usp
The domain file is not provided
The case is:  pyclmuapp
The log file is:  pyclmuapp.log
The output file is:  {&#39;original&#39;: [&#39;/home/junjie/github/pyclmuapp/docs/notebooks/own/workdir/outputfolder/lnd/hist/pyclmuapp.clm2.h0.2018-07-01-00000.nc&#39;]}
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span><span class="w"> </span>pyclmuapp<span class="w"> </span><span class="err">\</span>
    <span class="o">--</span><span class="n">container_type</span> <span class="n">docker</span> \
    <span class="o">--</span><span class="n">iflog</span> <span class="kc">True</span> \
    <span class="o">--</span><span class="n">logfile</span> <span class="s2">&quot;pyclmuapp.log&quot;</span> \
    <span class="o">--</span><span class="n">usr_forcing</span> <span class="s2">&quot;era5_data/era5_land_ts_forcing_51.5_0.12_30_2018_7_2018_9.nc&quot;</span> \
    <span class="o">--</span><span class="n">usr_surfdata</span> <span class="s2">&quot;surfdata.nc&quot;</span> \
    <span class="o">--</span><span class="n">RUN_STARTDATE</span> <span class="s2">&quot;2018-07-01&quot;</span> <span class="o">--</span><span class="n">STOP_OPTION</span> <span class="s2">&quot;ndays&quot;</span> <span class="o">--</span><span class="n">STOP_N</span> <span class="s2">&quot;15&quot;</span> \
    <span class="o">--</span><span class="n">RUN_TYPE</span> <span class="s2">&quot;coldstart&quot;</span> \
    <span class="o">--</span><span class="n">hist_mfilt</span> <span class="s2">&quot;1000000000&quot;</span> \
    <span class="o">--</span><span class="n">output_prefix</span> <span class="s2">&quot;_clm.nc&quot;</span> \
    <span class="o">--</span><span class="n">CASE_NAME</span> <span class="s2">&quot;pyclmuapp&quot;</span> \
    <span class="o">--</span><span class="n">clean</span> <span class="kc">True</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Namespace(init=False, pwd=&#39;/home/junjie/github/pyclmuapp/docs/notebooks/own&#39;, container_type=&#39;docker&#39;, input_path=None, output_path=None, log_path=None, scripts_path=None, pyclmuapp_mode=&#39;usp&#39;, has_container=True, usr_domain=None, usr_forcing=&#39;era5_data/era5_land_ts_forcing_51.5_0.12_30_2018_7_2018_9.nc&#39;, usr_surfdata=&#39;surfdata.nc&#39;, output_prefix=&#39;_clm.nc&#39;, case_name=&#39;pyclmuapp&#39;, run_startdate=&#39;2018-07-01&#39;, start_tod=&#39;00000&#39;, stop_option=&#39;ndays&#39;, stop_n=&#39;15&#39;, run_type=&#39;coldstart&#39;, run_refcase=&#39;None&#39;, run_refdate=&#39;None&#39;, run_reftod=&#39;00000&#39;, urban_hac=&#39;ON&#39;, iflog=True, logfile=&#39;pyclmuapp.log&#39;, hist_type=&#39;GRID&#39;, hist_nhtfrq=1, hist_mfilt=1000000000, clean=&#39;True&#39;, surf_var=None, surf_action=0, forcing_var=None, forcing_action=0, script=None, urbsurf=None, soildata=None, pct_urban=[0, 0, 100.0], lat=None, lon=None, outputname=&#39;surfdata.nc&#39;, zbot=30, start_year=2012, end_year=2012, start_month=1, end_month=12, source=&#39;cds&#39;)
Copying the file era5_land_ts_forcing_51.5_0.12_30_2018_7_2018_9.nc to the /home/junjie/github/pyclmuapp/docs/notebooks/own/workdir/inputfolder/usp
The domain file is not provided
The case is:  pyclmuapp
The log file is:  pyclmuapp.log
The output file is:  {&#39;original&#39;: [&#39;/home/junjie/github/pyclmuapp/docs/notebooks/own/workdir/outputfolder/lnd/hist/pyclmuapp.clm2.h0.2018-07-01-00000.nc&#39;]}
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span><span class="w"> </span>pyclmuapp<span class="w"> </span><span class="err">\</span>
    <span class="o">--</span><span class="n">container_type</span> <span class="n">docker</span> \
    <span class="o">--</span><span class="n">iflog</span> <span class="kc">True</span> \
    <span class="o">--</span><span class="n">logfile</span> <span class="s2">&quot;pyclmuapp.log&quot;</span> \
    <span class="o">--</span><span class="n">usr_forcing</span> <span class="s2">&quot;era5_data/era5_forcing_51.5_0.12_30_2018_7_2018_9.nc&quot;</span> \
    <span class="o">--</span><span class="n">usr_surfdata</span> <span class="s2">&quot;surfdata.nc&quot;</span> \
    <span class="o">--</span><span class="n">RUN_STARTDATE</span> <span class="s2">&quot;2018-07-01&quot;</span> <span class="o">--</span><span class="n">STOP_OPTION</span> <span class="s2">&quot;ndays&quot;</span> <span class="o">--</span><span class="n">STOP_N</span> <span class="s2">&quot;15&quot;</span> \
    <span class="o">--</span><span class="n">CASE_NAME</span> <span class="s2">&quot;pyclmuapp&quot;</span> \
    <span class="o">--</span><span class="n">clean</span> <span class="kc">True</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Namespace(init=False, pwd=&#39;/home/junjie/github/pyclmuapp/docs/notebooks/own&#39;, container_type=&#39;docker&#39;, input_path=None, output_path=None, log_path=None, scripts_path=None, pyclmuapp_mode=&#39;usp&#39;, has_container=True, usr_domain=None, usr_forcing=&#39;era5_data/era5_forcing_51.5_0.12_30_2018_7_2018_9.nc&#39;, usr_surfdata=&#39;surfdata.nc&#39;, output_prefix=&#39;_clm.nc&#39;, case_name=&#39;pyclmuapp&#39;, run_startdate=&#39;2018-07-01&#39;, start_tod=&#39;00000&#39;, stop_option=&#39;ndays&#39;, stop_n=&#39;15&#39;, run_type=&#39;coldstart&#39;, run_refcase=&#39;None&#39;, run_refdate=&#39;None&#39;, run_reftod=&#39;00000&#39;, urban_hac=&#39;ON&#39;, iflog=True, logfile=&#39;pyclmuapp.log&#39;, hist_type=&#39;GRID&#39;, hist_nhtfrq=1, hist_mfilt=1000000000, clean=&#39;True&#39;, surf_var=None, surf_action=0, forcing_var=None, forcing_action=0, script=None, urbsurf=None, soildata=None, pct_urban=[0, 0, 100.0], lat=None, lon=None, outputname=&#39;surfdata.nc&#39;, zbot=30, start_year=2012, end_year=2012, start_month=1, end_month=12, source=&#39;cds&#39;)
Copying the file era5_forcing_51.5_0.12_30_2018_7_2018_9.nc to the /home/junjie/github/pyclmuapp/docs/notebooks/own/workdir/inputfolder/usp
The domain file is not provided
The case is:  pyclmuapp
The log file is:  pyclmuapp.log
The output file is:  {&#39;original&#39;: [&#39;/home/junjie/github/pyclmuapp/docs/notebooks/own/workdir/outputfolder/lnd/hist/pyclmuapp.clm2.h0.2018-07-01-00000.nc&#39;]}
</pre></div></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../basic/basic_usage_cli.html" class="btn btn-neutral float-left" title="Basic usage: Command line" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="prepare_urbansurf_10evlurb.html" class="btn btn-neutral float-right" title="Make your own surface data" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Junjie Yu, Zhonghua Zheng.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>